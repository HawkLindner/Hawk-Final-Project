<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BlackJack</title>
    <link href = "blackjack.css" rel = "stylesheet">
</head>
<body>
    <h1>Dealer</h1>
    <div id="cards">
        <span id= "Dscore"></span>
        <li id = "table"></li>

    </div>
    <button type = "button" id = "start">Start</button>
    <!-- Do i use get for / here -->

    <script>
        let dealerCards = [];
        let card1;
        let card2;

        let dealer = {}
       
        startBtn = document.getElementById("start");
        startBtn.addEventListener("click",start);
        let table = document.getElementById("table");
            
        async function statusCheck(res){
            if(!res.ok){
                throw new Error("Failed to fetch dealer cards");
            }
            return res;
        }
        async function handleError(){
            return "Something went wrong";
        }
        function processData(responseData){
            dealer = responseData;
                card1 = createCard(dealer.card1);
                card2 = createCard(dealer.card2);
                console.log(dealer.card1);
                table.append(card1,card2);
        }
        let go = false;
        async function start(){
                await fetch("http://localhost:5000/start")// Await the fetch request
                .then(statusCheck)
                .catch(handleError);
                await fetch("http://localhost:5000/dealerPage")
                .then(statusCheck)
                .then(resp => resp.json())
                .then(processData)
                .catch(handleError)
               
                //json has card1, card2,visablity for both, and a sum for visablity
        // Now you can update the DOM or do other operations with the dealer cards data
    };
   function createCard(card){
        let img = document.createElement("img");
        img.src = card.src;
        console.log(img.src);
        return img;
   }
    </script>
</body>
</html>